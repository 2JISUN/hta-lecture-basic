<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.Connection"%>
<%@page import="java.sql.DriverManager"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	

    //1. driver 찾기
    String driver = "oracle.jdbc.OracleDriver";
	Class.forName(driver);
	
	//2. url
	// 자바17 = 오라클11
	String url = "jdbc:oracle:thin:@localhost:1521:xe";
    String id = "jisun";
    String pw = "1234";
    
    Connection conn = DriverManager.getConnection(url, id, pw);
	System.out.println("db연결 성공");
	
	//3. 조회 : 쿼리 작성 + 결과값 받아오기
	//3-1. 쿼리문 처리 메서드
	//3-2. 결과값 받아오기 select 를 제외하고 나머지는 정수 0
	PreparedStatement pstmt = null;
	ResultSet rs = null;
	String sql = "select * from test";
	pstmt = conn.prepareStatement(sql);
	rs = pstmt.executeQuery();
	
	/*
	if(rs.next()){
		System.out.println(rs.getString("id"));
		System.out.println(rs.getString("password"));
	}
	if(rs.next()){
		System.out.println(rs.getString("id"));
		System.out.println(rs.getString("password"));
	}
	if(rs.next()){
		System.out.println(rs.getString("id"));
		System.out.println(rs.getString("password"));
	}
	*/
	
%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>데이터베이스 결과 테이블</title>
    <style>
    	h1 {
    	width: 50%;
    	margin: auto;
    	}
        table {
            border-collapse: collapse;
            width: 50%;
            margin: auto;
        }

        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h1>데이터베이스 결과 테이블</h1>
    <table>
        <tr>
        	<th>NO</th>
            <th>ID</th>
            <th>Password</th>
            <th>Age</th> <!-- Age 열 추가 -->
            <th>Regdate</th> <!-- RegDate 열 추가 -->
        </tr>
        <%
            while(rs.next()) {
        %>
            <tr>
            	<td><%= rs.getInt("no") %></td>
                <td><%= rs.getString("id") %></td>
                <td><%= rs.getString("password") %></td>
                <td><%= rs.getString("age") %></td> <!-- Age 값 표시 -->
                <td><%= rs.getString("regdate") %></td> <!-- Reg Date 값 표시 -->
            </tr>
        <%
            }
        %>
    </table>
</body>
</html>






















